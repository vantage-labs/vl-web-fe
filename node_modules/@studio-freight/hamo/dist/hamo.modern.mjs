import{useCallback as e,useEffect as t,useState as n,useMemo as r,useRef as o}from"react";import c from"@studio-freight/tempus";import i from"just-debounce-it";function s(n,r){const o=e(e=>{n.current&&!n.current.contains(e.target)&&r()},[n,r]);t(()=>{if(n.current)return document.addEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",o)}},[o,n])}function u(){const[e,r]=n(!1);return t(()=>{r(!0)},[]),e}function a(){const e=u();return r(()=>{if(!e)return;const t=window.location,n=t.href,r=new URLSearchParams(t.search),o=n.includes("#debug")||n.includes("/_debug")||r.has("debug")||"development"===process.env.NODE_ENV,c=n.includes("#production")||r.has("production");return o&&!c},[e])}function d(){const[e,r]=n();return t(()=>{function e(){r(document.readyState)}return document.addEventListener("readystatechange",e,!1),e(),()=>document.removeEventListener("readystatechange",e,!1)},[]),e}function f(e,n=0){t(()=>{if(e)return c.add(e,n),()=>c.remove(e)},[e,n])}function l({root:r=null,rootMargin:c="0px",threshold:i=0,once:s=!1,lazy:u=!1,callback:a=(()=>{})}={},d=[]){const f=o({}),[l,m]=n({}),[h,v]=n();t(()=>{if(!h)return;const e=new IntersectionObserver(([t])=>{u?f.current=t:m(t),a(t),s&&t.isIntersecting&&e.disconnect()},{root:r,rootMargin:c,threshold:i});return e.observe(h),()=>{e.disconnect()}},[h,r,c,i,u,s,...d]);const w=e(()=>f.current,[]);return[v,u?w:l]}function m(e,n=1e3,r=[]){t(()=>{const t=setInterval(e,n);return()=>clearInterval(t)},[n,...r])}function h(){const[e,r]=n();return t(()=>{function e(){r("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0)}return window.addEventListener("resize",e,!1),e(),()=>{window.removeEventListener("resize",e,!1)}},[]),e}function v(e){const[r,o]=n();return t(()=>{const t=window.matchMedia(e);function n(){o(t.matches)}return t.addEventListener("change",n,!1),n(),()=>t.removeEventListener("change",n,!1)},[e]),r}function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},w.apply(this,arguments)}function p({lazy:r=!1,debounce:c=500,box:s="border-box",callback:u=(()=>{})}={},a=[]){const d=o({}),[f,l]=n({}),[m,h]=n();t(()=>{if(!m)return;const e=i(([e])=>{d.current=e,u(e),r||l(e)},c,!0),t=new ResizeObserver(e);return t.observe(m,{box:s}),()=>{t.disconnect(),e.cancel()}},[m,r,c,s,...a]);const v=e(()=>d.current,[]);return[h,r?v:f]}function b(e){"sticky"===getComputedStyle(e).position&&(e.style.setProperty("position","static"),e.dataset.sticky="true"),e.offsetParent&&b(e.offsetParent)}function g(e){var t;"true"===(null==e||null==(t=e.dataset)?void 0:t.sticky)&&(e.style.removeProperty("position"),e.dataset.sticky="true",delete e.dataset.sticky),e.parentNode&&g(e.parentNode)}function y(e,t=0){const n=t+e.offsetTop;return e.offsetParent?y(e.offsetParent,n):n}function z(e,t=0){const n=t+e.offsetLeft;return e.offsetParent?z(e.offsetParent,n):n}function E({ignoreTransform:r=!1,ignoreSticky:c=!0,lazy:s=!1,debounce:u=500,resizeDebounce:a=u,callback:d=(()=>{})}={},f=[]){const[l,m]=n(),[h,v]=n({}),E=o({}),[L]=p({lazy:!0,debounce:a,callback:e=>{const t=e.borderBoxSize[0].inlineSize,n=e.borderBoxSize[0].blockSize;E.current.width=t,E.current.height=n,d(E.current),s||v(e=>w({},e,{width:t,height:n}))}},[s,a,...f]);t(()=>{if(!l)return;const e=i(()=>{let e,t;if(c&&b(l),r)e=y(l),t=z(l);else{const n=l.getBoundingClientRect();e=n.top+window.scrollY,t=n.left+window.scrollX}c&&g(l),E.current.top=e,E.current.left=t,d(E.current),s||v(n=>w({},n,{top:e,left:t}))},u,!0),t=new ResizeObserver(e);return t.observe(document.body),()=>{t.disconnect(),e.cancel()}},[l,s,u,r,c,...f]);const P=e(()=>E.current,[]);return[e=>{m(e),L(e)},s?P:h]}function L(e=[],t=[]){const n=r(()=>t&&[t].flat(),[t]),o=r(()=>e&&[e].flat(),[e]);return r(()=>{if(!n||!o)return;const t=o.map(e=>{var t;return null==(t=n.find(t=>t.type===e))?void 0:t.props.children});return e[0]?t:t[0]},[n,o])}function P(e=500){const[r,o]=n(),[c,s]=n();return t(()=>{const t=i(()=>{o(Math.min(window.innerWidth,document.documentElement.clientWidth)),s(Math.min(window.innerHeight,document.documentElement.clientHeight))},e,!0);return window.addEventListener("resize",t,!1),t(),()=>window.removeEventListener("resize",t,!1)},[e]),{width:r,height:c}}export{a as useDebug,d as useDocumentReadyState,f as useFrame,l as useIntersectionObserver,m as useInterval,u as useIsClient,h as useIsTouchDevice,v as useMediaQuery,s as useOutsideClickEvent,E as useRect,p as useResizeObserver,L as useSlots,P as useWindowSize};
//# sourceMappingURL=hamo.modern.mjs.map
